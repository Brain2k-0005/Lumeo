@page "/themes"

<PageTitle>Themes â€” Lumeo</PageTitle>

<PageHeader Title="Themes" Description="Customize the look and feel of your application. Choose a style, color theme, adjust the border radius, and toggle dark mode." />

<div class="grid grid-cols-1 lg:grid-cols-[1fr_320px] gap-8">
    <!-- Preview Area -->
    <div class="space-y-6">
        <h3 class="text-lg font-semibold text-foreground">Preview</h3>

        <!-- Card Example -->
        <Card>
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Create project</h3>
                <p class="text-sm text-muted-foreground">Deploy your new project in one-click.</p>
            </CardHeader>
            <CardContent>
                <div class="space-y-4">
                    <div class="space-y-2">
                        <Label>Name</Label>
                        <Input placeholder="My awesome project" />
                    </div>
                    <div class="space-y-2">
                        <Label>Description</Label>
                        <Textarea placeholder="Describe your project..." />
                    </div>
                </div>
            </CardContent>
            <CardFooter>
                <div class="flex justify-between w-full">
                    <Button Variant="Button.ButtonVariant.Outline">Cancel</Button>
                    <Button>Deploy</Button>
                </div>
            </CardFooter>
        </Card>

        <!-- Buttons -->
        <Card>
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Buttons</h3>
            </CardHeader>
            <CardContent>
                <div class="flex flex-wrap gap-2">
                    <Button>Primary</Button>
                    <Button Variant="Button.ButtonVariant.Secondary">Secondary</Button>
                    <Button Variant="Button.ButtonVariant.Destructive">Destructive</Button>
                    <Button Variant="Button.ButtonVariant.Outline">Outline</Button>
                    <Button Variant="Button.ButtonVariant.Ghost">Ghost</Button>
                    <Button Variant="Button.ButtonVariant.Link">Link</Button>
                </div>
            </CardContent>
        </Card>

        <!-- Form Controls -->
        <Card>
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Form Controls</h3>
            </CardHeader>
            <CardContent>
                <div class="space-y-4">
                    <div class="flex items-center gap-6">
                        <div class="flex items-center gap-2">
                            <Switch @bind-Checked="_switch1" />
                            <Label>Airplane Mode</Label>
                        </div>
                        <div class="flex items-center gap-2">
                            <Checkbox @bind-Checked="_check1" />
                            <Label>Accept terms</Label>
                        </div>
                    </div>
                    <div class="w-full max-w-sm">
                        <Slider @bind-Value="_slider1" />
                    </div>
                    <div class="flex items-center gap-2">
                        <Toggle @bind-Pressed="_bold">
                            <Blazicon Svg="Lucide.Bold" class="h-4 w-4" />
                        </Toggle>
                        <Toggle @bind-Pressed="_italic">
                            <Blazicon Svg="Lucide.Italic" class="h-4 w-4" />
                        </Toggle>
                        <Toggle @bind-Pressed="_underline" Variant="Toggle.ToggleVariant.Outline">
                            <Blazicon Svg="Lucide.Underline" class="h-4 w-4" />
                        </Toggle>
                    </div>
                </div>
            </CardContent>
        </Card>

        <!-- Badges & Progress -->
        <Card>
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Badges & Progress</h3>
            </CardHeader>
            <CardContent>
                <div class="space-y-4">
                    <div class="flex flex-wrap gap-2">
                        <Badge>Default</Badge>
                        <Badge Variant="Badge.BadgeVariant.Secondary">Secondary</Badge>
                        <Badge Variant="Badge.BadgeVariant.Outline">Outline</Badge>
                        <Badge Variant="Badge.BadgeVariant.Destructive">Destructive</Badge>
                    </div>
                    <Progress Value="65" />
                </div>
            </CardContent>
        </Card>

        <!-- Dialog Preview -->
        <Card>
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Dialog</h3>
            </CardHeader>
            <CardContent>
                <Dialog @bind-IsOpen="_dialogOpen">
                    <DialogTrigger>
                        <Button Variant="Button.ButtonVariant.Outline">Open Dialog</Button>
                    </DialogTrigger>
                    <DialogContent>
                        <DialogHeader>
                            <DialogTitle>Edit profile</DialogTitle>
                            <DialogDescription>Make changes to your profile here. Click save when you're done.</DialogDescription>
                        </DialogHeader>
                        <div class="space-y-4 py-4">
                            <div class="space-y-2">
                                <Label>Name</Label>
                                <Input placeholder="Enter your name" />
                            </div>
                            <div class="space-y-2">
                                <Label>Email</Label>
                                <Input type="email" placeholder="Enter your email" />
                            </div>
                        </div>
                        <DialogFooter>
                            <DialogClose>
                                <Button Variant="Button.ButtonVariant.Outline">Cancel</Button>
                            </DialogClose>
                            <Button>Save changes</Button>
                        </DialogFooter>
                    </DialogContent>
                </Dialog>
            </CardContent>
        </Card>

        <!-- Accordion -->
        <Card>
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Accordion</h3>
            </CardHeader>
            <CardContent>
                <Accordion>
                    <AccordionItem Value="item-1">
                        <AccordionTrigger>Is it accessible?</AccordionTrigger>
                        <AccordionContent>
                            <span class="text-sm text-muted-foreground">Yes. It adheres to the WAI-ARIA design pattern and supports keyboard navigation.</span>
                        </AccordionContent>
                    </AccordionItem>
                    <AccordionItem Value="item-2">
                        <AccordionTrigger>Is it styled?</AccordionTrigger>
                        <AccordionContent>
                            <span class="text-sm text-muted-foreground">Yes. It comes with default styles that match the other components' aesthetic.</span>
                        </AccordionContent>
                    </AccordionItem>
                    <AccordionItem Value="item-3">
                        <AccordionTrigger>Is it animated?</AccordionTrigger>
                        <AccordionContent>
                            <span class="text-sm text-muted-foreground">Yes. It uses CSS animations for smooth open and close transitions.</span>
                        </AccordionContent>
                    </AccordionItem>
                </Accordion>
            </CardContent>
        </Card>

        <!-- Avatar Group -->
        <Card>
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Avatars</h3>
            </CardHeader>
            <CardContent>
                <div class="flex items-center gap-3">
                    <Avatar>
                        <AvatarFallback>JD</AvatarFallback>
                    </Avatar>
                    <Avatar>
                        <AvatarFallback>AB</AvatarFallback>
                    </Avatar>
                    <Avatar>
                        <AvatarFallback>MK</AvatarFallback>
                    </Avatar>
                    <Avatar Size="Avatar.AvatarSize.Sm">
                        <AvatarFallback>
                            <Blazicon Svg="Lucide.User" class="h-4 w-4" />
                        </AvatarFallback>
                    </Avatar>
                    <Avatar Size="Avatar.AvatarSize.Lg">
                        <AvatarFallback>LG</AvatarFallback>
                    </Avatar>
                </div>
            </CardContent>
        </Card>

        <!-- Alerts -->
        <Card>
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Alerts</h3>
            </CardHeader>
            <CardContent>
                <div class="space-y-3">
                    <Alert>
                        <div class="flex items-start gap-3">
                            <Blazicon Svg="Lucide.Bell" class="h-4 w-4 mt-0.5" />
                            <div>
                                <p class="font-medium leading-none tracking-tight mb-1">Heads up!</p>
                                <p class="text-sm text-muted-foreground">You can add components to your app using the CLI.</p>
                            </div>
                        </div>
                    </Alert>
                    <Alert Variant="Alert.AlertVariant.Destructive">
                        <div class="flex items-start gap-3">
                            <Blazicon Svg="Lucide.X" class="h-4 w-4 mt-0.5" />
                            <div>
                                <p class="font-medium leading-none tracking-tight mb-1">Error</p>
                                <p class="text-sm">Your session has expired. Please log in again.</p>
                            </div>
                        </div>
                    </Alert>
                </div>
            </CardContent>
        </Card>

        <!-- Skeleton Preview -->
        <Card>
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Skeleton</h3>
            </CardHeader>
            <CardContent>
                <div class="flex items-center space-x-4">
                    <Skeleton Class="h-12 w-12 rounded-full" />
                    <div class="space-y-2">
                        <Skeleton Class="h-4 w-[250px]" />
                        <Skeleton Class="h-4 w-[200px]" />
                    </div>
                </div>
            </CardContent>
        </Card>

        <!-- Tooltip Demo -->
        <Card>
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Tooltip</h3>
            </CardHeader>
            <CardContent>
                <div class="flex gap-4">
                    <Tooltip>
                        <TooltipTrigger>
                            <Button Variant="Button.ButtonVariant.Outline">
                                <Blazicon Svg="Lucide.Plus" class="h-4 w-4" />
                            </Button>
                        </TooltipTrigger>
                        <TooltipContent>Add to library</TooltipContent>
                    </Tooltip>
                    <Tooltip>
                        <TooltipTrigger>
                            <Button Variant="Button.ButtonVariant.Outline">
                                <Blazicon Svg="Lucide.Settings" class="h-4 w-4" />
                            </Button>
                        </TooltipTrigger>
                        <TooltipContent Side="TooltipContent.TooltipSide.Bottom">Settings</TooltipContent>
                    </Tooltip>
                    <Tooltip>
                        <TooltipTrigger>
                            <Button Variant="Button.ButtonVariant.Outline">
                                <Blazicon Svg="Lucide.Heart" class="h-4 w-4" />
                            </Button>
                        </TooltipTrigger>
                        <TooltipContent Side="TooltipContent.TooltipSide.Right">Favorite</TooltipContent>
                    </Tooltip>
                </div>
            </CardContent>
        </Card>

        <!-- Typography Preview -->
        <Card>
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Typography</h3>
            </CardHeader>
            <CardContent>
                <div class="space-y-4">
                    <h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight text-foreground">Heading 1</h1>
                    <h2 class="scroll-m-20 text-3xl font-semibold tracking-tight text-foreground">Heading 2</h2>
                    <h3 class="scroll-m-20 text-2xl font-semibold tracking-tight text-foreground">Heading 3</h3>
                    <h4 class="scroll-m-20 text-xl font-semibold tracking-tight text-foreground">Heading 4</h4>
                    <Separator />
                    <p class="leading-7 text-foreground">
                        The king, seeing how much happier his subjects were, realized the error of
                        his ways and repealed the taxes on laughter and joy.
                    </p>
                    <p class="text-sm text-muted-foreground">
                        This is muted text typically used for descriptions and secondary information.
                    </p>
                    <p class="text-foreground">
                        Visit the <a href="#" class="font-medium text-primary underline underline-offset-4">documentation</a> for more details.
                    </p>
                    <p class="text-xs text-muted-foreground">Small text for captions and footnotes.</p>
                    <p class="text-sm text-foreground">
                        Use the <code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm">install</code> command to add components.
                    </p>
                </div>
            </CardContent>
        </Card>

        <!-- Tabs -->
        <Tabs ActiveValue="tab1">
            <TabsList>
                <TabsTrigger Value="tab1">Account</TabsTrigger>
                <TabsTrigger Value="tab2">Password</TabsTrigger>
                <TabsTrigger Value="tab3">Settings</TabsTrigger>
            </TabsList>
            <TabsContent Value="tab1">
                <Card>
                    <CardHeader>
                        <h3 class="text-lg font-semibold leading-none tracking-tight">Account</h3>
                        <p class="text-sm text-muted-foreground">Make changes to your account here.</p>
                    </CardHeader>
                    <CardContent>
                        <div class="space-y-2">
                            <Label>Username</Label>
                            <Input Value="@("@lumeo")" />
                        </div>
                    </CardContent>
                    <CardFooter>
                        <Button>Save changes</Button>
                    </CardFooter>
                </Card>
            </TabsContent>
            <TabsContent Value="tab2">
                <Card>
                    <CardHeader>
                        <h3 class="text-lg font-semibold leading-none tracking-tight">Password</h3>
                        <p class="text-sm text-muted-foreground">Change your password here.</p>
                    </CardHeader>
                    <CardContent>
                        <div class="space-y-2">
                            <Label>Current password</Label>
                            <Input type="password" />
                        </div>
                    </CardContent>
                    <CardFooter>
                        <Button>Update password</Button>
                    </CardFooter>
                </Card>
            </TabsContent>
            <TabsContent Value="tab3">
                <Card>
                    <CardHeader>
                        <h3 class="text-lg font-semibold leading-none tracking-tight">Settings</h3>
                        <p class="text-sm text-muted-foreground">Configure your preferences.</p>
                    </CardHeader>
                </Card>
            </TabsContent>
        </Tabs>
    </div>

    <!-- Customizer Panel -->
    <div class="space-y-6">
        <Card Class="sticky top-20">
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Customize</h3>
                <p class="text-sm text-muted-foreground">Pick a style and color for your components.</p>
            </CardHeader>
            <CardContent>
                <div class="space-y-6">
                    <!-- Style -->
                    <div class="space-y-2">
                        <Label>Style</Label>
                        <div class="grid grid-cols-2 gap-2">
                            <button class="@($"inline-flex items-center justify-center rounded-md border px-3 py-2 text-sm transition-colors {(_activeStyle == "default" ? "border-primary bg-accent" : "border-input hover:bg-accent/50")}")"
                                    @onclick="@(() => SetStyle("default"))">
                                Default
                            </button>
                            <button class="@($"inline-flex items-center justify-center rounded-md border px-3 py-2 text-sm transition-colors {(_activeStyle == "new-york" ? "border-primary bg-accent" : "border-input hover:bg-accent/50")}")"
                                    @onclick="@(() => SetStyle("new-york"))">
                                New York
                            </button>
                        </div>
                    </div>

                    <!-- Color Theme -->
                    <div class="space-y-2">
                        <Label>Color</Label>
                        <div class="grid grid-cols-3 gap-2">
                            @foreach (var theme in _themes)
                            {
                                <button class="@($"inline-flex items-center justify-center gap-2 rounded-md border px-3 py-2 text-sm transition-colors {(theme.Value == _activeTheme ? "border-primary bg-accent" : "border-input hover:bg-accent/50")}")"
                                        @onclick="() => SetTheme(theme.Value)">
                                    <span class="h-4 w-4 rounded-full" style="background: @theme.Color"></span>
                                    @theme.Name
                                </button>
                            }
                        </div>
                    </div>

                    <!-- Radius -->
                    <div class="space-y-2">
                        <Label>Radius</Label>
                        <div class="grid grid-cols-5 gap-2">
                            @foreach (var r in _radii)
                            {
                                <button class="@($"inline-flex items-center justify-center rounded-md border px-3 py-2 text-sm transition-colors {(r == _activeRadius ? "border-primary bg-accent" : "border-input hover:bg-accent/50")}")"
                                        @onclick="() => SetRadius(r)">
                                    @(r)
                                </button>
                            }
                        </div>
                    </div>

                    <!-- Dark Mode -->
                    <div class="flex items-center justify-between">
                        <Label>Dark Mode</Label>
                        <Switch Checked="_darkMode" CheckedChanged="OnDarkModeChanged" />
                    </div>

                    <!-- Copy Theme Button -->
                    <Button Variant="Button.ButtonVariant.Outline" Class="w-full" @onclick="CopyTheme">
                        @if (_copied)
                        {
                            <span class="flex items-center gap-2">
                                <Blazicon Svg="Lucide.Check" class="h-4 w-4" />
                                Copied!
                            </span>
                        }
                        else
                        {
                            <span>Copy Theme</span>
                        }
                    </Button>
                </div>
            </CardContent>
        </Card>

        <!-- Installation Code Block -->
        <Card>
            <CardHeader>
                <h3 class="text-lg font-semibold leading-none tracking-tight">Installation</h3>
                <p class="text-sm text-muted-foreground">Add this to your CSS to use the selected theme.</p>
            </CardHeader>
            <CardContent>
                <div class="rounded-md bg-muted p-4 font-mono text-sm text-foreground overflow-x-auto">
                    <pre class="whitespace-pre-wrap">/* Add to your CSS */
@@import "lumeo/css/lumeo.css";

@if (!string.IsNullOrEmpty(_activeTheme))
{
@:/* Apply theme */
@:[data-theme="@_activeTheme"] { /* Applied */ }
}
:root {
  --radius: @(_activeRadius)rem;
}</pre>
                </div>
            </CardContent>
        </Card>
    </div>
</div>

@inject IJSRuntime JS

@code {
    private bool _switch1 = true;
    private bool _check1 = true;
    private double _slider1 = 50;
    private bool _bold, _italic, _underline;
    private bool _darkMode;
    private bool _dialogOpen;
    private bool _copied;

    private string _activeTheme = "";
    private string _activeRadius = "0.75";
    private string _activeStyle = "default";

    private record ThemeOption(string Name, string Value, string Color);

    private readonly ThemeOption[] _themes =
    [
        new("Orange", "", "hsl(14 70% 50%)"),
        new("Zinc", "zinc", "hsl(240 6% 10%)"),
        new("Blue", "blue", "hsl(221 83% 53%)"),
        new("Green", "green", "hsl(142 71% 45%)"),
        new("Rose", "rose", "hsl(346 77% 50%)"),
    ];

    private readonly string[] _radii = ["0", "0.25", "0.5", "0.75", "1"];

    private async Task SetStyle(string style)
    {
        _activeStyle = style;
        if (style == "new-york")
        {
            await JS.InvokeVoidAsync("eval", "document.documentElement.classList.add('style-new-york')");
        }
        else
        {
            await JS.InvokeVoidAsync("eval", "document.documentElement.classList.remove('style-new-york')");
        }
    }

    private async Task SetTheme(string theme)
    {
        _activeTheme = theme;
        var js = string.IsNullOrEmpty(theme)
            ? "document.documentElement.removeAttribute('data-theme')"
            : $"document.documentElement.setAttribute('data-theme', '{theme}')";
        await JS.InvokeVoidAsync("eval", js);
    }

    private async Task SetRadius(string radius)
    {
        _activeRadius = radius;
        await JS.InvokeVoidAsync("eval", $"document.documentElement.style.setProperty('--radius', '{radius}rem')");
    }

    private async Task OnDarkModeChanged(bool value)
    {
        _darkMode = value;
        await JS.InvokeVoidAsync("eval", value
            ? "document.documentElement.classList.add('dark')"
            : "document.documentElement.classList.remove('dark')");
    }

    private async Task CopyTheme()
    {
        var themeLines = string.IsNullOrEmpty(_activeTheme)
            ? ""
            : $"\n/* Apply theme */\n[data-theme=\"{_activeTheme}\"] {{ /* Applied */ }}\n";
        var css = $"/* Add to your CSS */\n@import \"lumeo/css/lumeo.css\";\n{themeLines}\n:root {{\n  --radius: {_activeRadius}rem;\n}}";
        await JS.InvokeVoidAsync("eval", $"navigator.clipboard.writeText({System.Text.Json.JsonSerializer.Serialize(css)})");
        _copied = true;
        StateHasChanged();
        await Task.Delay(2000);
        _copied = false;
        StateHasChanged();
    }
}
