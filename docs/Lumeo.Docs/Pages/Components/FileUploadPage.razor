@page "/components/file-upload"

<PageTitle>File Upload â€” Lumeo</PageTitle>

<PageHeader Title="File Upload" Description="A drag-and-drop file upload area with customizable labels and file type restrictions." />

<div class="space-y-8">
    <ComponentDemo Title="Default" Code="@_defaultCode">
        <div class="w-full max-w-md">
            <FileUpload OnFilesSelected="HandleFiles" />
            @if (_fileName is not null)
            {
                <p class="text-sm text-muted-foreground mt-2">Selected: @_fileName</p>
            }
        </div>
    </ComponentDemo>

    <ComponentDemo Title="Image Upload" Code="@_imageCode">
        <div class="w-full max-w-md">
            <FileUpload Label="Upload an image" Description="PNG, JPG or GIF up to 10MB" Accept="image/*" OnFilesSelected="HandleImageFiles" />
            @if (_imageName is not null)
            {
                <p class="text-sm text-muted-foreground mt-2">Selected: @_imageName</p>
            }
        </div>
    </ComponentDemo>

    <ComponentDemo Title="Multiple Files" Code="@_multipleCode">
        <div class="w-full max-w-md">
            <FileUpload Label="Upload documents" Description="Select one or more files" Multiple="true" OnFilesSelected="HandleMultipleFiles" />
            @if (_fileCount > 0)
            {
                <p class="text-sm text-muted-foreground mt-2">@_fileCount file(s) selected</p>
            }
        </div>
    </ComponentDemo>
</div>

@code {
    private string? _fileName;
    private string? _imageName;
    private int _fileCount;

    private void HandleFiles(InputFileChangeEventArgs e)
    {
        _fileName = e.File.Name;
    }

    private void HandleImageFiles(InputFileChangeEventArgs e)
    {
        _imageName = e.File.Name;
    }

    private void HandleMultipleFiles(InputFileChangeEventArgs e)
    {
        _fileCount = e.FileCount;
    }

    private string _defaultCode = @"<FileUpload OnFilesSelected=""HandleFiles"" />";

    private string _imageCode = @"<FileUpload
    Label=""Upload an image""
    Description=""PNG, JPG or GIF up to 10MB""
    Accept=""image/*""
    OnFilesSelected=""HandleFiles"" />";

    private string _multipleCode = @"<FileUpload
    Label=""Upload documents""
    Description=""Select one or more files""
    Multiple=""true""
    OnFilesSelected=""HandleFiles"" />";
}
