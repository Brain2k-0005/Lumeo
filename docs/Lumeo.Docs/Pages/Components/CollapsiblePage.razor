@page "/components/collapsible"

<PageTitle>Collapsible — Lumeo</PageTitle>

<PageHeader Title="Collapsible" Description="An interactive component that expands and collapses content." />

<div class="space-y-8">
    <ComponentDemo Title="Default" Code="@_defaultCode">
        <div class="w-full max-w-sm">
            <Collapsible @bind-IsOpen="_isOpen1">
                <div class="flex items-center justify-between px-4">
                    <h4 class="text-sm font-semibold text-foreground">Starred Repositories</h4>
                    <CollapsibleTrigger>
                        <Button Variant="Button.ButtonVariant.Ghost" Size="Button.ButtonSize.Sm">
                            <DynamicIcon Name="ChevronDown" Class="h-4 w-4" />
                        </Button>
                    </CollapsibleTrigger>
                </div>
                <div class="rounded-md border bg-card px-4 py-2 text-sm text-foreground mt-2">
                    @("@")shadcn/ui
                </div>
                <CollapsibleContent>
                    <div class="space-y-2 mt-2">
                        <div class="rounded-md border bg-card px-4 py-2 text-sm text-foreground">
                            @("@")radix-ui/primitives
                        </div>
                        <div class="rounded-md border bg-card px-4 py-2 text-sm text-foreground">
                            @("@")tailwindcss/typography
                        </div>
                    </div>
                </CollapsibleContent>
            </Collapsible>
        </div>
    </ComponentDemo>

    <ComponentDemo Title="Initially Open" Code="@_openCode">
        <div class="w-full max-w-sm">
            <Collapsible @bind-IsOpen="_isOpen2">
                <CollapsibleTrigger>
                    <div class="flex items-center gap-2 cursor-pointer">
                        <DynamicIcon Name="ChevronRight" Class="@($"h-4 w-4 transition-transform {(_isOpen2 ? "rotate-90" : "")}")" />
                        <span class="text-sm font-medium text-foreground">More info</span>
                    </div>
                </CollapsibleTrigger>
                <CollapsibleContent>
                    <p class="mt-2 text-sm text-muted-foreground pl-6">
                        This section was initially expanded and can be toggled open and closed.
                    </p>
                </CollapsibleContent>
            </Collapsible>
        </div>
    </ComponentDemo>

    <ComponentDemo Title="Sidebar Section" Code="@_sidebarCode">
        <div class="w-full max-w-xs border rounded-lg p-2">
            <Collapsible @bind-IsOpen="_isOpen3">
                <CollapsibleTrigger>
                    <div class="flex items-center justify-between w-full px-2 py-1.5 rounded-md hover:bg-accent cursor-pointer">
                        <div class="flex items-center gap-2 text-sm font-medium text-foreground">
                            <DynamicIcon Name="Settings" Class="h-4 w-4" />
                            Settings
                        </div>
                        <DynamicIcon Name="ChevronDown" Class="@($"h-4 w-4 text-muted-foreground transition-transform {(_isOpen3 ? "rotate-180" : "")}")" />
                    </div>
                </CollapsibleTrigger>
                <CollapsibleContent>
                    <div class="pl-6 mt-1 space-y-1">
                        <div class="px-2 py-1.5 text-sm text-muted-foreground hover:text-foreground hover:bg-accent rounded-md cursor-pointer">General</div>
                        <div class="px-2 py-1.5 text-sm text-muted-foreground hover:text-foreground hover:bg-accent rounded-md cursor-pointer">Security</div>
                        <div class="px-2 py-1.5 text-sm text-muted-foreground hover:text-foreground hover:bg-accent rounded-md cursor-pointer">Notifications</div>
                    </div>
                </CollapsibleContent>
            </Collapsible>
        </div>
    </ComponentDemo>
</div>

@code {
    private bool _isOpen1;
    private bool _isOpen2 = true;
    private bool _isOpen3 = true;

    private string _defaultCode = @"<Collapsible @bind-IsOpen=""_isOpen"">
    <div class=""flex items-center justify-between"">
        <h4 class=""text-sm font-semibold"">Starred Repositories</h4>
        <CollapsibleTrigger>
            <Button Variant=""Button.ButtonVariant.Ghost"" Size=""Button.ButtonSize.Sm"">
                <Blazicon Svg=""Lucide.ChevronDown"" class=""h-4 w-4"" />
            </Button>
        </CollapsibleTrigger>
    </div>
    <CollapsibleContent>
        <div class=""rounded-md border px-4 py-2 text-sm"">Content here</div>
    </CollapsibleContent>
</Collapsible>";

    private string _sidebarCode = @"<Collapsible @bind-IsOpen=""_isOpen"">
    <CollapsibleTrigger>
        <div class=""flex items-center justify-between px-2 py-1.5 rounded-md hover:bg-accent cursor-pointer"">
            <div class=""flex items-center gap-2 text-sm font-medium"">
                <Blazicon Svg=""Lucide.Settings"" class=""h-4 w-4"" /> Settings
            </div>
            <Blazicon Svg=""Lucide.ChevronDown"" class=""@($""h-4 w-4 transition-transform {(_isOpen ? \""rotate-180\"" : \""\"")}"")}"" />
        </div>
    </CollapsibleTrigger>
    <CollapsibleContent>
        <div class=""pl-6 mt-1 space-y-1"">
            <div class=""px-2 py-1.5 text-sm text-muted-foreground"">General</div>
            <div class=""px-2 py-1.5 text-sm text-muted-foreground"">Security</div>
            <div class=""px-2 py-1.5 text-sm text-muted-foreground"">Notifications</div>
        </div>
    </CollapsibleContent>
</Collapsible>";

    private string _openCode = @"<Collapsible @bind-IsOpen=""_isOpen"">
    <CollapsibleTrigger>
        <span class=""text-sm font-medium"">More info</span>
    </CollapsibleTrigger>
    <CollapsibleContent>
        <p class=""mt-2 text-sm text-muted-foreground"">Expandable content.</p>
    </CollapsibleContent>
</Collapsible>";
}
