@page "/components/form"

<PageTitle>Form â€” Lumeo</PageTitle>

<PageHeader Title="Form" Description="Structured form layout with labels, descriptions, and validation messages." />

<div class="space-y-8">
    <ComponentDemo Title="Default" Code="@_defaultCode">
        <div class="w-full max-w-sm space-y-4">
            <FormField Name="username">
                <FormItem>
                    <FormLabel>Username</FormLabel>
                    <Input Placeholder="Enter your username" />
                    <FormDescription>This is your public display name.</FormDescription>
                </FormItem>
            </FormField>

            <FormField Name="email">
                <FormItem>
                    <FormLabel>Email</FormLabel>
                    <Input Type="email" Placeholder="you@example.com" />
                    <FormDescription>We will never share your email.</FormDescription>
                </FormItem>
            </FormField>

            <Button>Submit</Button>
        </div>
    </ComponentDemo>

    <ComponentDemo Title="With Validation Error" Code="@_errorCode">
        <div class="w-full max-w-sm space-y-4">
            <FormField Name="email" Error="Please enter a valid email address.">
                <FormItem>
                    <FormLabel>Email</FormLabel>
                    <Input Type="email" Placeholder="you@example.com" />
                    <FormDescription>Enter your email address.</FormDescription>
                    <FormMessage />
                </FormItem>
            </FormField>
        </div>
    </ComponentDemo>

    <ComponentDemo Title="Password Change" Code="@_passwordCode">
        <div class="w-full max-w-sm space-y-4">
            <FormField Name="current">
                <FormItem>
                    <FormLabel>Current Password</FormLabel>
                    <Input Type="password" Placeholder="Enter current password" />
                </FormItem>
            </FormField>
            <FormField Name="new-password" Error="@_pwError">
                <FormItem>
                    <FormLabel>New Password</FormLabel>
                    <Input Type="password" Placeholder="Enter new password" @bind-Value="_newPassword" />
                    <FormDescription>At least 8 characters.</FormDescription>
                    <FormMessage />
                </FormItem>
            </FormField>
            <FormField Name="confirm">
                <FormItem>
                    <FormLabel>Confirm Password</FormLabel>
                    <Input Type="password" Placeholder="Confirm new password" @bind-Value="_confirmPassword" />
                </FormItem>
            </FormField>
            <Button OnClick="ValidatePasswords">Update Password</Button>
        </div>
    </ComponentDemo>
</div>

@code {
    private string _defaultCode = @"<FormField Name=""username"">
    <FormItem>
        <FormLabel>Username</FormLabel>
        <Input Placeholder=""Enter your username"" />
        <FormDescription>This is your public display name.</FormDescription>
    </FormItem>
</FormField>";

    private string _errorCode = @"<FormField Name=""email"" Error=""Please enter a valid email address."">
    <FormItem>
        <FormLabel>Email</FormLabel>
        <Input Type=""email"" Placeholder=""you@example.com"" />
        <FormDescription>Enter your email address.</FormDescription>
        <FormMessage />
    </FormItem>
</FormField>";

    private string? _newPassword;
    private string? _confirmPassword;
    private string? _pwError;

    private void ValidatePasswords()
    {
        if (_newPassword != _confirmPassword)
            _pwError = "Passwords do not match.";
        else if ((_newPassword?.Length ?? 0) < 8)
            _pwError = "Password must be at least 8 characters.";
        else
            _pwError = null;
    }

    private string _passwordCode = @"<FormField Name=""current"">
    <FormItem>
        <FormLabel>Current Password</FormLabel>
        <Input Type=""password"" Placeholder=""Enter current password"" />
    </FormItem>
</FormField>
<FormField Name=""new-password"" Error=""@_pwError"">
    <FormItem>
        <FormLabel>New Password</FormLabel>
        <Input Type=""password"" Placeholder=""Enter new password"" @bind-Value=""_newPassword"" />
        <FormDescription>At least 8 characters.</FormDescription>
        <FormMessage />
    </FormItem>
</FormField>
<FormField Name=""confirm"">
    <FormItem>
        <FormLabel>Confirm Password</FormLabel>
        <Input Type=""password"" Placeholder=""Confirm new password"" @bind-Value=""_confirmPassword"" />
    </FormItem>
</FormField>
<Button OnClick=""ValidatePasswords"">Update Password</Button>";
}
