@namespace Lumeo

<aside class="@CssClass" @attributes="AdditionalAttributes">
    @ChildContent
</aside>

@code {
    [CascadingParameter] public SidebarProvider.SidebarState? State { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public SidebarSide Side { get; set; } = SidebarSide.Left;
    [Parameter] public string? Class { get; set; }
    [Parameter(CaptureUnmatchedValues = true)] public Dictionary<string, object>? AdditionalAttributes { get; set; }

    private bool IsCollapsed => State?.IsCollapsed ?? false;

    private string CssClass => $"flex h-full shrink-0 flex-col border-r bg-sidebar text-sidebar-foreground overflow-y-auto overflow-x-hidden transition-all duration-300 {(IsCollapsed ? "w-16" : "w-64")} {(Side == SidebarSide.Right ? "order-last border-l border-r-0" : "")} {Class}".Trim();

    public enum SidebarSide { Left, Right }
}
