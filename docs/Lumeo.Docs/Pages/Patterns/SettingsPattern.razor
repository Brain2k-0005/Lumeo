@page "/patterns/settings"
@namespace Lumeo.Docs.Pages.Patterns

<PageTitle>Settings Pattern — Lumeo</PageTitle>

<PageHeader Title="Settings Page" Description="A full settings layout with sidebar navigation and multiple configuration sections." />

<div class="w-full">
    <div class="flex gap-8 min-h-[600px]">

        <!-- Left Nav -->
        <aside class="w-56 shrink-0">
            <nav class="space-y-1">
                @foreach (var navItem in _sections)
                {
                    <button type="button"
                            class="@($"w-full flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors {(_activeSection == navItem.Id ? "bg-accent text-accent-foreground" : "text-muted-foreground hover:bg-accent hover:text-accent-foreground")}")"
                            @onclick="@(() => _activeSection = navItem.Id)">
                        @((MarkupString)navItem.IconSvg)
                        @(navItem.Label)
                    </button>
                }
            </nav>
        </aside>

        <!-- Content -->
        <div class="flex-1 min-w-0">

            <!-- Profile Section -->
            @if (_activeSection == "profile")
            {
                <Card>
                    <CardHeader>
                        <h3 class="text-lg font-semibold leading-none tracking-tight">Profile</h3>
                        <p class="text-sm text-muted-foreground">Manage your public profile information.</p>
                    </CardHeader>
                    <CardContent>
                        <div class="space-y-6">
                            <div class="flex items-center gap-4">
                                <div class="h-20 w-20 rounded-full bg-muted flex items-center justify-center shrink-0">
                                    <DynamicIcon Name="User" Class="h-10 w-10 text-muted-foreground" />
                                </div>
                                <div class="space-y-1">
                                    <p class="text-sm font-medium text-foreground">Profile photo</p>
                                    <p class="text-xs text-muted-foreground">JPG, GIF or PNG. 1MB max.</p>
                                    <Button Variant="Button.ButtonVariant.Outline" Size="Button.ButtonSize.Sm">Change Avatar</Button>
                                </div>
                            </div>
                            <Separator />
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div class="space-y-2">
                                    <Label>First name</Label>
                                    <Input placeholder="First name" Value="Olivia" />
                                </div>
                                <div class="space-y-2">
                                    <Label>Last name</Label>
                                    <Input placeholder="Last name" Value="Martin" />
                                </div>
                            </div>
                            <div class="space-y-2">
                                <Label>Email</Label>
                                <Input type="email" placeholder="name@example.com" Value="olivia.martin@example.com" />
                            </div>
                            <div class="space-y-2">
                                <Label>Bio</Label>
                                <Textarea placeholder="Tell us a little bit about yourself..." />
                            </div>
                        </div>
                    </CardContent>
                    <CardFooter>
                        <div class="flex justify-end gap-2 w-full">
                            <Button Variant="Button.ButtonVariant.Outline">Cancel</Button>
                            <Button>Save changes</Button>
                        </div>
                    </CardFooter>
                </Card>
            }

            <!-- Account Section -->
            @if (_activeSection == "account")
            {
                <div class="space-y-6">
                    <Card>
                        <CardHeader>
                            <h3 class="text-lg font-semibold leading-none tracking-tight">Change Password</h3>
                            <p class="text-sm text-muted-foreground">Update your password to keep your account secure.</p>
                        </CardHeader>
                        <CardContent>
                            <div class="space-y-4 max-w-sm">
                                <div class="space-y-2">
                                    <Label>Current password</Label>
                                    <Input type="password" placeholder="Enter current password" />
                                </div>
                                <div class="space-y-2">
                                    <Label>New password</Label>
                                    <Input type="password" placeholder="Enter new password" />
                                </div>
                                <div class="space-y-2">
                                    <Label>Confirm new password</Label>
                                    <Input type="password" placeholder="Confirm new password" />
                                </div>
                            </div>
                        </CardContent>
                        <CardFooter>
                            <Button>Update password</Button>
                        </CardFooter>
                    </Card>

                    <Card>
                        <CardHeader>
                            <h3 class="text-lg font-semibold leading-none tracking-tight">Two-Factor Authentication</h3>
                            <p class="text-sm text-muted-foreground">Add an extra layer of security to your account.</p>
                        </CardHeader>
                        <CardContent>
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-foreground">Enable 2FA</p>
                                    <p class="text-sm text-muted-foreground">Require a verification code when signing in.</p>
                                </div>
                                <Switch @bind-Checked="_twoFactor" />
                            </div>
                        </CardContent>
                    </Card>

                    <Card>
                        <CardHeader>
                            <h3 class="text-lg font-semibold leading-none tracking-tight text-destructive">Danger Zone</h3>
                            <p class="text-sm text-muted-foreground">Irreversible and destructive actions.</p>
                        </CardHeader>
                        <CardContent>
                            <Alert Variant="Alert.AlertVariant.Destructive" Class="mb-4">
                                <p class="font-medium">Warning</p>
                                <p class="text-sm mt-1">Deleting your account is permanent. All your data will be permanently removed and cannot be recovered.</p>
                            </Alert>
                            <Button Variant="Button.ButtonVariant.Destructive">
                                <DynamicIcon Name="Trash" Class="h-4 w-4 mr-2" />
                                Delete account
                            </Button>
                        </CardContent>
                    </Card>
                </div>
            }

            <!-- Appearance Section -->
            @if (_activeSection == "appearance")
            {
                <Card>
                    <CardHeader>
                        <h3 class="text-lg font-semibold leading-none tracking-tight">Appearance</h3>
                        <p class="text-sm text-muted-foreground">Customize how Lumeo looks on your device.</p>
                    </CardHeader>
                    <CardContent>
                        <div class="space-y-6">
                            <div class="space-y-3">
                                <Label>Theme</Label>
                                <p class="text-sm text-muted-foreground">Select the theme for the interface.</p>
                                <ToggleGroup Type="ToggleGroup.ToggleGroupType.Single" Variant="ToggleGroup.ToggleGroupVariant.Outline">
                                    <ToggleGroupItem Value="light">Light</ToggleGroupItem>
                                    <ToggleGroupItem Value="dark">Dark</ToggleGroupItem>
                                    <ToggleGroupItem Value="system">System</ToggleGroupItem>
                                </ToggleGroup>
                            </div>
                            <Separator />
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <Label>Font size</Label>
                                        <p class="text-sm text-muted-foreground">Adjust the base font size for readability.</p>
                                    </div>
                                    <span class="text-sm font-medium text-foreground">@_fontSize px</span>
                                </div>
                                <Slider @bind-Value="_fontSize" Min="12" Max="20" Step="1" Class="max-w-xs" />
                                <div class="flex justify-between text-xs text-muted-foreground max-w-xs">
                                    <span>12px</span>
                                    <span>20px</span>
                                </div>
                            </div>
                            <Separator />
                            <div class="space-y-3">
                                <Label>Accent color</Label>
                                <p class="text-sm text-muted-foreground">Choose your preferred accent color.</p>
                                <div class="flex gap-3 flex-wrap">
                                    @foreach (var color in _accentColors)
                                    {
                                        <button type="button"
                                                class="@($"h-8 w-8 rounded-full transition-all ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 {(_selectedAccent == color.Name ? "ring-2 ring-ring ring-offset-2" : "hover:scale-110")}")"
                                                style="background-color: @color.Hex;"
                                                title="@color.Name"
                                                @onclick="@(() => _selectedAccent = color.Name)">
                                        </button>
                                    }
                                </div>
                            </div>
                        </div>
                    </CardContent>
                    <CardFooter>
                        <div class="flex justify-end gap-2 w-full">
                            <Button Variant="Button.ButtonVariant.Outline">Reset to defaults</Button>
                            <Button>Save preferences</Button>
                        </div>
                    </CardFooter>
                </Card>
            }

            <!-- Notifications Section -->
            @if (_activeSection == "notifications")
            {
                <Card>
                    <CardHeader>
                        <h3 class="text-lg font-semibold leading-none tracking-tight">Notifications</h3>
                        <p class="text-sm text-muted-foreground">Configure how you receive notifications.</p>
                    </CardHeader>
                    <CardContent>
                        <div class="space-y-6">
                            @foreach (var notif in _notifications)
                            {
                                <div class="flex items-center justify-between py-3">
                                    <div class="space-y-1">
                                        <p class="text-sm font-medium text-foreground">@notif.Title</p>
                                        <p class="text-sm text-muted-foreground">@notif.Description</p>
                                    </div>
                                    <Switch @bind-Checked="notif.Enabled" />
                                </div>
                                @if (notif != _notifications.Last())
                                {
                                    <Separator />
                                }
                            }
                        </div>
                    </CardContent>
                    <CardFooter>
                        <div class="flex justify-end w-full">
                            <Button>Save preferences</Button>
                        </div>
                    </CardFooter>
                </Card>
            }

            <!-- Display Section -->
            @if (_activeSection == "display")
            {
                <Card>
                    <CardHeader>
                        <h3 class="text-lg font-semibold leading-none tracking-tight">Display</h3>
                        <p class="text-sm text-muted-foreground">Control what information is displayed in the app.</p>
                    </CardHeader>
                    <CardContent>
                        <div class="space-y-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-foreground">Show online status</p>
                                    <p class="text-sm text-muted-foreground">Let others see when you are active.</p>
                                </div>
                                <Switch @bind-Checked="_showOnlineStatus" />
                            </div>
                            <Separator />
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-foreground">Compact mode</p>
                                    <p class="text-sm text-muted-foreground">Reduce spacing for a denser layout.</p>
                                </div>
                                <Switch @bind-Checked="_compactMode" />
                            </div>
                            <Separator />
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-foreground">Show activity feed</p>
                                    <p class="text-sm text-muted-foreground">Display recent activity on the dashboard.</p>
                                </div>
                                <Switch @bind-Checked="_showActivityFeed" />
                            </div>
                            <Separator />
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-foreground">Keyboard shortcuts</p>
                                    <p class="text-sm text-muted-foreground">Enable keyboard shortcuts for faster navigation.</p>
                                </div>
                                <Switch @bind-Checked="_keyboardShortcuts" />
                            </div>
                        </div>
                    </CardContent>
                    <CardFooter>
                        <div class="flex justify-end w-full">
                            <Button>Save preferences</Button>
                        </div>
                    </CardFooter>
                </Card>
            }

        </div>
    </div>
</div>

@code {
    private string _activeSection = "profile";

    private double _fontSize = 14;
    private string _selectedAccent = "Indigo";
    private bool _twoFactor;
    private bool _showOnlineStatus = true;
    private bool _compactMode;
    private bool _showActivityFeed = true;
    private bool _keyboardShortcuts = true;

    private record NavSection(string Id, string Label, string IconSvg);
    private record AccentColor(string Name, string Hex);

    private readonly List<NavSection> _sections = new()
    {
        new("profile", "Profile", "<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"8\" r=\"5\"/><path d=\"M20 21a8 8 0 1 0-16 0\"/></svg>"),
        new("account", "Account", "<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\"/><circle cx=\"12\" cy=\"12\" r=\"3\"/></svg>"),
        new("appearance", "Appearance", "<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"4\"/><path d=\"M12 2v2\"/><path d=\"M12 20v2\"/><path d=\"m4.93 4.93 1.41 1.41\"/><path d=\"m17.66 17.66 1.41 1.41\"/><path d=\"M2 12h2\"/><path d=\"M20 12h2\"/><path d=\"m6.34 17.66-1.41 1.41\"/><path d=\"m19.07 4.93-1.41 1.41\"/></svg>"),
        new("notifications", "Notifications", "<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9\"/><path d=\"M10.3 21a1.94 1.94 0 0 0 3.4 0\"/></svg>"),
        new("display", "Display", "<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect width=\"20\" height=\"14\" x=\"2\" y=\"3\" rx=\"2\"/><path d=\"M8 21h8\"/><path d=\"M12 17v4\"/></svg>"),
    };

    private readonly List<AccentColor> _accentColors = new()
    {
        new("Slate", "#64748b"),
        new("Indigo", "#6366f1"),
        new("Violet", "#8b5cf6"),
        new("Blue", "#3b82f6"),
        new("Cyan", "#06b6d4"),
        new("Green", "#22c55e"),
        new("Orange", "#f97316"),
        new("Rose", "#f43f5e"),
    };

    private class NotificationSetting
    {
        public string Title { get; init; } = "";
        public string Description { get; init; } = "";
        public bool Enabled { get; set; }
    }

    private readonly List<NotificationSetting> _notifications = new()
    {
        new() { Title = "Email notifications", Description = "Receive notifications via email for account activity and updates.", Enabled = true },
        new() { Title = "Push notifications", Description = "Get push notifications on your device for important alerts.", Enabled = true },
        new() { Title = "SMS notifications", Description = "Receive text messages for critical account notifications.", Enabled = false },
        new() { Title = "Marketing emails", Description = "Receive emails about new features, tips, and special offers.", Enabled = false },
        new() { Title = "Security alerts", Description = "Be notified about new sign-ins and suspicious activity.", Enabled = true },
    };
}
